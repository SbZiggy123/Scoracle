{% extends "base.html" %}

{% block main_content %}
<div class="join-league">
<div class="grid-container">
  <main class="league-container">
    <div class="join-form">
      <h2>Join A Private League</h2>
      <form method="POST" action="{{ url_for('main.join_league') }}">
      <label>Enter Private League Code:</label>
      <input type="text" name="league_code" required>
      <button type="submit" class="private-join">Join</button>
    </form>
    </div>
  </div>
    <div class="public-leagues">
    <h1>Public Leagues</h1>
    {% if leagues %}
      <ul class="league-list">
        {% for league in leagues %}
          <li class="league-item">
            <span class="league-name">
            <a href="{{ url_for('main.league', league_id=league.id) }}">{{ league.name }}</a>
          </span>
            {% if league.id|string not in user_leagues %}
              <form action="{{ url_for('main.join_public_league', league_id=league.id) }}" method="POST" style="display:inline;" class="join-form">
                <button type="submit" class="btn-join">JOIN</button>
              </form>
            {% else %}
              <button disabled class="btn-disabled">Already Joined</button>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="no-leagues">No public leagues available.</p>
    {% endif %}
  </div>
  </main>
</div>
</div>
{% endblock %}